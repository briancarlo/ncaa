<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>D3 Demo: Making a scatterplot with SVG</title>
		<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
		<style type="text/css">

			.axis path,
			.axis line {
				fill: none;
				stroke: black;
				shape-rendering: crispEdges;
			}
			
			.axis text {
				font-family: sans-serif;
				font-size: 10px;
			}	
			.tooltip {
				  position: absolute;
				  width: 200px;
				  height: 28px;
				  pointer-events: none;
			}
		</style>
	</head>
	<body>
		<script type="text/javascript">


			var w = 500;
			var h = 500;
			
			var dataset = [		
				[60,54,1,6],
				[73,74,6,5],
				[53,63,6,5],
				[72,75,6,4],
				[54,60,3,4],
				[63,64,1,4],
				[62,52,10,4],
				[69,74,4,3],
				[73,71,9,3],
				[59,61,3,3],
				[76,81,4,3],
				[69,52,4,3],
				[70,64,3,3],
				[72,82,1,3],
				[79,68,3,3],
				[83,63,3,2],
				[76,78,7,2],
				[55,85,3,2],
				[84,61,7,2],
				[85,83,3,2],
				[78,60,7,2],
				[57,60,8,2],
				[77,60,8,2],
				[65,77,5,2],
				[80,73,8,2],
				[85,77,5,2],
				[79,65,5,2],
				[63,44,8,2],
				[53,55,8,2],
				[66,51,1,2],
				[61,45,8,2],
				[85,77,1,1],
				[68,59,15,1],
				[76,59,9,1],
				[75,77,7,1],
				[71,78,11,1],
				[67,86,5,1],
				[56,49,1,1],
				[64,37,15,1],
				[76,66,11,1],
				[74,60,5,1],
				[93,75,11,1],
				[79,77,5,1],
				[71,66,1,1],
				[70,59,15,1],
				[80,69,13,1],
				[53,58,3,1],
				[57,40,13,1],
				[87,85,3,1],
				[71,64,9,1],
				[83,80,7,1],
				[75,35,13,1],
				[87,68,3,1],
				[73,69,9,1],
				[75,80,7,1],
				[93,78,9,1],
				[57,61,7,1],
				[48,77,1,1],
				[67,55,15,1],
				[73,53,5,1],
				[89,81,3,1],
				[77,53,11,1],
				[59,60,5,1]
			];

			var svg = d3.select("body")
						.append("svg")
						.attr("width", w)
						.attr("height", h)

			var padding = 60;


			var xScale = d3.scale.linear()
								// .domain([30, d3.max(dataset, function(d) { return d[1]; })])
								.domain([30, 100])

                     			.range([padding, w - padding]);

			var yScale = d3.scale.linear()
			                     // .domain([30, d3.max(dataset, function(d) { return d[0]; })])
 								.domain([30, 100])

			                     .range([h - padding, padding]);

			// setup fill color
			var cValue = function(d) { return d[3];},
			    color = d3.scale.category10();

			svg.selectAll("circle")
				.data(dataset)
				.enter()
				.append("circle")
				.attr("cx", function(d) {
					return xScale(d[1]);
				})
				.attr("cy", function(d) {
					return yScale(d[0]);
				})
				.attr("r", function(d) {
					return (5*(Math.log(d[2])/2));
					// return 5;

				})
      			.style("fill", function(d) { return color(cValue(d));})
      			.on("mouseover", function(d) {
          			tooltip.transition()
               			.duration(200)
               			.style("opacity", .9);
          			tooltip.html(dataset[0] + "<br/> " + d[1])
               			.style("left", (d3.event.pageX + 5) + "px")
               			.style("top", (d3.event.pageY - 28) + "px");
      			})
      			.on("mouseout", function(d) {
          			tooltip.transition()
               		.duration(500)
               		.style("opacity", 0); });

      		var xAxis = d3.svg.axis()
      						.scale(xScale)
      						.orient("bottom")
      						.ticks(9);

      		var yAxis = d3.svg.axis()
      						.scale(yScale)
      						.orient("left")
      						.ticks(9);

      		svg.append("g")
      			.attr("class","axis")
      			.attr("transform","translate(0," + (h - padding) + ")")
    			.call(xAxis);

     		svg.append("g")
      			.attr("class","axis")
      			.attr("transform", "translate(" + padding + ",0)")
    			.call(yAxis);


			var line = svg.append("line")
		 				.attr("x1", 0)
		                .attr("y1", 500)
		                .attr("x2", 500)
		                .attr("y2", 10)
		                .attr("stroke-width", 1)
		                .style("stroke-dasharray", ("5,3"))
		                .attr("stroke", "black");

    		var underdog = svg.append("text")
					    .attr("class", "x label")
					    .attr("text-anchor", "end")
					    .attr("x", w - 60)
					    .attr("y", h - 20)
					    .text("Underdog Score");

			var favorite = svg.append("text")
					    .attr("class", "y label")
					    .attr("text-anchor", "middle")
					    .attr("y", 20)
					    .attr("dy", 0)
					    .attr("x", -105)
					    .attr("transform", "rotate(-90)")
					    .text("Favorite Score");

		</script>
	</body>
</html>